---
import { Image } from "astro:assets";

import Layout from "@/layouts/Layout.astro";
import { DonationButton } from "@/components/DonationButton";

import { Actions } from "@/components/Actions";
import { DonationProgressBar } from "@/components/DonationProgressBar";
import { astroI18n, t } from "astro-i18n";

import arrow from "@/assets/arrow.png";
import kgetlengrivier from "@/assets/kgetlengrivier.svg";
import logonobg from "@/assets/logo-nobg.svg";

const pageName = t("header.home");
astroI18n.locale;
---

<Layout pageName={pageName}>
  <!-- Tooltip -->
  <div
    id="tooltip"
    class="text-xs absolute right-20 top-20 z-20 flex flex-col items-end invisible md:visible transition-opacity duration-300"
  >
    <Image src={arrow} alt={t("alt.arrow")} class="" />
    <p class="max-w-40 font-secondary">
      {t("header.tooltip")}
    </p>
  </div>

  <script>
    if (typeof window !== "undefined") {
      window.addEventListener("scroll", () => {
        const tooltip = document.getElementById("tooltip");
        if (!tooltip) return;
        if (window.scrollY > 10) {
          tooltip.style.opacity = "0";
          tooltip.style.pointerEvents = "none";
        } else {
          tooltip.style.opacity = "1";
          tooltip.style.pointerEvents = "";
        }
      });
    }
  </script>

  <!-- Hero layout -->
  <div
    class="px-4 sm:px-8 flex flex-col md:flex-row items-center content-stretch justify-center gap-10 md:gap-20 flex-nowrap grow mt-10 lg:mt-20"
  >
    <div
      class="flex flex-col md:flex-row items-start gap-6 md:gap-10 w-full max-w-5xl mx-auto"
    >
      <div class="flex-shrink-0 max-w-md w-full md:w-auto mb-6 md:mb-0">
        <Image
          src={kgetlengrivier}
          alt={t("alt.kgetlengrivier")}
          class="w-full h-auto"
        />
      </div>
      <div
        class="w-full h-auto flex items-start content-stretch justify-center gap-x-1 gap-y-5 flex-col flex-nowrap"
      >
        <h1
          class="font-primary font-semibold text-4xl md:text-6xl text-primary-light"
          set:html={t("s1.header")}
        />
        <p
          class="text-wrap max-w-100 lg:max-w-150 font-primary font-extralight text-secondary-light"
          set:html={t("s1.text")}
        />
        <div class="flex flex-col lg:flex-row gap-2 lg:gap-4">
          <DonationButton client:load />
          <p class="font-primary px-1" set:html={t("s1.callToAction")} />
        </div>
      </div>
    </div>
  </div>

  <!-- Information about actions -->
  <div class="w-full h-auto bg-primary-light mt-25">
    <h1
      class="text-primary-dark text-4xl md:text-6xl font-primary font-normal p-5 md:p-10"
      set:html={t("s2.header")}
    />
    <div class="px-20">
      <Actions client:load />
    </div>

    <!-- Bar that shows how many money has been donated -->
    <h1
      class="text-primary-dark text-4xl md:text-6xl font-primary font-normal p-5 md:p-10 text-right"
      set:html={t("s3.header")}
    />
    <div class="px-5 md:px-10 pb-5 md:p-10">
      <DonationProgressBar
        client:load
        current={parseInt(t("s4.current"))}
        goal={parseInt(t("s4.goal"))}
      />
      <p class="text-xs text-gray-200 font-primary py-2 md:p-5">
        {t("s4.updateNotice")}
      </p>
    </div>
  </div>

  <!-- A call to donate -->
  <div class="w-full h-auto px-5 md:px-10 py-10 md:py-5">
    <div class="flex flex-col sm:flex-row sm:items-center gap-4">
      <h1
        class="text-4xl md:text-6xl font-semibold font-primary text-primary-light m-0"
        set:html={t("s5.donateNow")}
      />
      <DonationButton client:load />
    </div>

    <div class="flex items-center gap-4">
      <Image src={logonobg} alt="M4rt.nl Logo" />
      <p class="text-lg font-primary font-light">
        zielman@m4rt.nl | +31 6 85550282
      </p>
    </div>
  </div>
</Layout>
